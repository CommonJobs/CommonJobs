@{
    Layout = "_MyMenuLayout.cshtml";
    ViewBag.Title = "Mi Menú";
    ScriptManager.RegisterJs(Url.Content("~/Scripts/my-menu-page.js"));
}

<div class="container">

    <ul class="nav nav-tabs" id="myTab">
        <li class="active"><a href="#todayTab" data-toggle="tab">Hoy</a></li>
        <li><a href="#configTab" data-toggle="tab">Configuración</a></li>
        <li><a href="#overridesTab" data-toggle="tab">Días específicos</a></li>
        <!-- ko foreach: Weeks -->
        <li><a data-toggle="tab" data-bind="attr: { href: '#week' + Key + 'Tab' }, text: Text"></a></li>
        <!-- /ko -->
    </ul>

    <div class="tab-content">
        <div class="tab-pane active" id="todayTab">
            <div class="alert alert-info">
                <h4>Coming soon!</h4>
                <p>Aquí se mostrará el pedido del día (ya realizado o a realizarse)</p>
            </div>
            <div class="alert">
                <strong>MyMenu</strong> es un desarrollo <em>OpenSource</em> realizado en ratos libres. Cualquier mejora es bienvenida, descargá el <a href="https://github.com/CommonJobs/CommonJobs">código fuente de GitHub</a> y hacé tu <em>Pull Request</em>.
            </div>
        </div>
        <div class="tab-pane" id="configTab">
            <form class="form-horizontal">
                <div class="control-group">
                    <label class="control-label" for="defaultPlace">Lugar por defecto:</label>
                    <div class="controls">
                        <select id="defaultPlace" data-bind="options: menu.Places, 
                                        optionsText: 'Text', optionsValue: 'Key', 
                                        value: DefaultPlaceKey, 
                                        optionsCaption: 'Seleccione...'">
                        </select>
                    </div>
                </div>
            </form>
            <div class="alert alert-info">
                <h4>Coming soon!</h4>
                <p>También se podrá configurar si se desean recibir notificaciones por e-mail.</p>
            </div>
        </div>

        <div class="tab-pane" id="overridesTab">
            <div class="alert alert-info">
                <h4>Coming soon!</h4>
                <p>Pronto los cambiós por días específicos se realizarán en una vista de calendario y se permitirá marcar un periodo de varios días.</p>
                <p>Por ahora, formularios sin validación!</p>
            </div>

            <button class="btn" type="button" data-bind="click: addOverride"><i class="icon-plus"></i>Agregar</button>
            <br /><br />
            <!-- ko foreach: Overrides -->
            <form class="well form-horizontal">
                <button class="btn" type="button" data-bind="click: $root.removeOverride"><i class="icon-remove"></i>Quitar</button>

                <div class="control-group">
                    <label class="control-label">Fecha:</label>
                    <div class="controls">
                        <input type="text" class="span2" data-bind="datepicker: Date, datepickerOptions: { dataType: 'iso' }" />
                        <input class="span6" type="text" readonly="readonly" data-bind="value: $root.getDayWeekLabel(Date)"/>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Comentario:</label>
                    <div class="controls">
                        <input type="text" class="span6" data-bind="value: Comment" />
                    </div>
                </div>

                <div class="control-group">
                    <div class="controls">
                        <label class="checkbox">
                            <input type="checkbox" data-bind="checked: Cancel">Cancelar comida del día
                        </label>
                    </div>
                </div>

                <!-- ko if: !Cancel() -->

                <div class="control-group">
                    <label class="control-label">Menú</label>
                    <div class="controls">
                        <select class="span2" data-bind="options: $root.menu.Options, 
                                        optionsText: 'Text', optionsValue: 'Key', 
                                        value: OptionKey, 
                                        optionsCaption: 'El menú de siempre'">
                        </select>
                        <input class="span6" type="text" readonly="readonly" data-bind="value: $root.getDayWeekOptionOverrideInfo(Date, OptionKey)" />
                    </div>
                    
                </div>

                <div class="control-group">
                    <label class="control-label">Lugar</label>
                    <div class="controls">
                        <select class="span2" data-bind="options: $root.menu.Places, 
                                        optionsText: 'Text', optionsValue: 'Key', 
                                        value: PlaceKey, 
                                        optionsCaption: 'El lugar de siempre'">
                        </select>
                        <input class="span6" type="text" readonly="readonly" data-bind="value: $root.getDayWeekPlaceOverrideInfo(Date, PlaceKey)" />
                    </div>
                </div>

                <!-- /ko -->

            </form>
            <!-- /ko -->
        </div>

        <!-- ko foreach: Weeks -->
        <div class="tab-pane" data-bind="attr: { id: 'week' + Key + 'Tab' }">
            <!-- ko foreach: MyMenu.days() -->
            <div class="well">
                <div>
                    <h4><!--ko text: MyMenu.days.getName($data)--><!--/ko--></h4>
                    <small>Próximo día: <!-- ko text: $root.nearFormated($parent.Key, $data) -->TODO: REMOVE<!-- /ko --></small>
                </div>
                <div class="row">
                    <div class="offset1 span7">
                        <label>
                            <input type="radio" data-bind="attr: { name: 'option_' + $parent.Key + '_' + $data }, value: '', checked:$root.getMenuChoice($parent.Key, $data)" />
                            No como aquí
                        </label>
                        <!-- ko foreach: $root.menu.Options -->
                        <label>
                            <input type="radio" data-bind="attr: { name: 'option_' + $parentContext.$parent.Key + '_' + $parent }, enable: $root.menu.getFood($parentContext.$parent.Key, $parent, Key), value: Key, checked:$root.getMenuChoice($parentContext.$parent.Key, $parent)" />
                            <!--ko text: Text--><!--/ko-->: <em><!--ko text: $root.menu.getFood($parentContext.$parent.Key, $parent, Key)--><!--/ko--></em>
                        </label>
                        <!-- /ko -->
                    </div>
                    <!-- ko if: $root.getMenuChoice($parent.Key, $data)() -->
                    <div class="span3">
                        <select data-bind="options: $root.menu.Places, 
                            optionsText: 'Text', optionsValue: 'Key', 
                            value: $root.getPlaceChoice($parent.Key, $data), 
                            optionsCaption: $root.getDefaultPlaceLabel()">
                        </select>
                    </div>
                    <!-- /ko -->
                </div>
            </div>
            <!-- /ko -->
        </div>
        <!-- /ko -->

        
    </div>
</div>
