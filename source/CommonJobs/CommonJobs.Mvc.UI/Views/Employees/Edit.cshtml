@{
    ViewBag.Title = "Edit";
    ScriptManager.RegisterCss(Url.Content("~/Scripts/mdd_styles.css"));
    ScriptManager.RegisterCss(Url.Content("~/Content/EditEmployee/EditEmployee.less"));
    ScriptManager.RegisterCss(Url.Content("~/Content/jquery.Jcrop.min.css"));
    
    ScriptManager.RegisterJs(Url.Content("~/Scripts/jquery.jcrop.min.js"));
    ScriptManager.RegisterJs(Url.Content("~/Scripts/MarkdownDeepLib.min.js"));
    ScriptManager.RegisterJs(Url.Content("~/Scripts/nervoustissue.js"));
    ScriptManager.RegisterJs(Url.Content("~/Scripts/nervoustissue-uploader.js"));
    ScriptManager.RegisterJs(Url.Content("~/Content/EditEmployee/EditEmployee.js"));
}
@if (false)
{
    <link href="../../Content/EditEmployee/EditEmployee.css" rel="stylesheet" type="text/css" />
    <script src="../../Content/EditEmployee/EditEmployee.js" type="text/javascript"></script>
}
<div id="EditApp" class="edition-normal">
    

    <div class="editing-bar">
        <div class="references">
            <h3>Referencias</h3>
            <ul>
                <li>Click en un <span class="reference-editable-field">campo subrayado</span> para editarlo.</li>
                <li>Click en <em>Guardar Cambios</em> luego de editar.</li>
                <li>Click en <em>Modo de edición &rarr; Todos los campos</em> para editar todos los campos.</li>
            </ul>
        </div>
        <div class="edition-mode">
            <h3>Modo de edición</h3>
            <p><button class="editionNormal">Normal</button></p>
            <p><button class="editionFullEdit">Todos los campos</button></p>
            <!-- <p><button class="editionReadonly">Solo lectura</button></p> -->
        </div>
        <div class="change-management-options">
            <h3>Cambios</h3>
            <p><button class="saveEmployee">Guardar cambios</button></p>
            <p><button class="reloadEmployee">Descartar cambios</button></p>
        </div>
        <div class="danger-zone">
            <h3>¡Precaución!</h3>
            <p><button class="deleteEmployee">Eliminar empleado</button></p>
        </div>
        <div class="back-link">
        @Html.ActionLink("« Volver al listado", "Index")
    </div>
    </div>
    
    <h1 class="editable-field" data-bind="fullName"></h1>

    <div id="info-header">
        <div class="editable-field photo" data-bind="Photo"></div>
        <div class="main-data">
            <ul>
                <li><span class="field-name">Posición:</span><span class="editable-field" data-bind="CurrentPosition"></span></li>
                <li class="additional-info">(<span class="field-name">Posición inicial:</span><span class="editable-field" data-bind="InitialPosition"></span>)</li>
                <li><span class="field-name">Proyecto Actual:</span><span class="editable-field" data-bind="CurrentProject"></span></li>
                <li><span class="field-name">Título:</span><span class="editable-field" data-bind="Degree"></span> (<span class="editable-field" data-bind="IsGraduated"><span class="view-editable view-editable-prototype">No graduado</span></span>)</li>
            </ul>
        </div>
    </div>

    <div class="info-section">
        <h2>Datos Personales</h2>
        <div class="personal-data">
            <h3>Información personal</h3>
            <ul>
                <li><span class="field-name">Fecha de nacimiento:</span><span class="editable-field" data-bind="BirthDate"><span class="view-editable view-editable-prototype">5 de Octubre de 1984 (28 años)</span></span></li>
                <li><span class="field-name">Estado Civil:</span><span class="editable-field" data-bind="MaritalStatus"><span class="view-editable view-editable-prototype">Soltero</span></span></li>
                <li><span class="field-name">Dirección:</span><span class="editable-field" data-bind="Address"></span></li>
                <li><span class="field-name">Teléfonos:</span><span class="editable-field" data-bind="Telephones"</span></li>
                <li><span class="field-name">Plataforma:</span><span class="editable-field" data-bind="Platform"></span></li>
            </ul>
        </div>
        <div class="aptitude-data additional-info-section">
            <h3>Aptitudes</h3>
            <ul>
                <li><span class="field-name">Seniority:</span><span class="editable-field" data-bind="Seniority"></span></li>
                <li><span class="field-name">Nivel de Inglés:</span><span class="editable-field" data-bind="EnglishLevel"></span></li>
                <li><span class="field-name">Título:</span><span class="editable-field" data-bind="Degree"></span> (<span class="editable-field" data-bind="IsGraduated"><span class="view-editable view-editable-prototype">No graduado</span></span>)</li>
                <li><span class="field-name">Universidad:</span><span class="editable-field" data-bind="College"></li>
                <li><span class="field-name">Skills:</span><span class="editable-field" data-bind="Skills"></span></li>
                <li>
                  <span class="field-name">Certificaciones:</span>
                  <div class="editable-field" data-bind="Certifications"></div>
                </li>
            </ul>
        </div>   
    </div>
    <div class="info-section">
        <h2>Datos Laborales</h2>
        <div class="Employment-data">
            <h3>Relación con la empresa</h3>
            <ul>
                <li><span class="field-name">Legajo:</span><span class="editable-field" data-bind="FileId"></span></li>
                <li><span class="field-name">Fecha de ingreso:</span><span class="editable-field" data-bind="HiringDate"><span class="view-editable view-editable-prototype">15 de Octubre de 2009 (3 años)</span></span></li>
                <li><span class="field-name">Carga Horaria:</span><span class="editable-field" data-bind="WorkingHours"><span class="view-editable view-editable-prototype">41 horas</span></span></li>
                <li><span class="field-name">Horario:</span><span class="editable-field" data-bind="Schedule"></span></li>
                <li><span class="field-name">Acuerdo:</span><span class="editable-field" data-bind="Agreement"></span></li>
            </ul>
            <h3>Remuneración <span class="confidential-info-title">Mostrar/Ocultar</span></h3>
            <div class="salary-data confidential-info-data">
                <span class="field-name">Remuneración actual:</span> <span class="view-field" data-bind="CurrentSalary"></span> <br />
                <span class="field-name">Remuneración inicial:</span> <span class="view-field" data-bind="InitialSalary"></span> <br />
                <span class="field-name">Cambios salariales:</span>
                <div class="editable-field" data-bind="SalaryChanges"></div> 
            </div>
        </div>
        <div class="misc-data additional-info-section">
            <h3>Otros datos</h3>
            <ul>
                <li><span class="field-name">Almuerzo:</span><span class="editable-field" data-bind="Lunch"><span class="view-editable view-editable-prototype">Si</span></span></li>
                <li><span class="field-name">Cuenta Bancaria:</span><span class="editable-field" data-bind="BankAccount"></span></li>
                <li><span class="field-name">Obra Social:</span><span class="editable-field" data-bind="HealthInsurance"></span></li>
            </ul>
            <h3>Vacaciones <span class="confidential-info-title">Mostrar/Ocultar</span></h3>
            <div class="confidential-info-data">
                <div class="vacation-items editable-field" data-bind="Vacations"></div>
            </div>
        </div>
    </div>    
    <div class="info-section">
        <h2>Notas <span class="confidential-info-title">Mostrar/Ocultar</span></h2>
        <div class="editable-field confidential-info-data notes-data" data-bind="Notes"></div> 
    </div>
    <div class="info-section files-data file-dropzone">
        <h2>Archivos adjuntos <span class="confidential-info-title">Mostrar/Ocultar</span></h2>
        <div class="attachment-container">
            <div class="attachment-slots">
                <div class="attachment-slot">
                    <p>Alta temprana</p>
                    <div class="attachment-slot-empty">
                        <p>(Faltante)</p>
                    </div>
                </div>
                <div class="attachment-slot">
                    <p>DNI</p>
                    <!-- TODO this should be generated by the data mapping -->
                    <!-- use the common FileUtilities js library -->
                    <div class="file-icon">
                        <p class="file-icon-image"><img src="/Content/Images/filetypes/doc-128.png" alt="DNI.doc" /></p>
                        <p class="file-name">DNI.doc</p>
                    </div>
                </div>
                <div class="attachment-slot">
                    <p>Degree</p>
                    <div class="file-icon">
                        <p class="file-icon-image"><img src="/Content/Images/filetypes/pdf-128.png" alt="Degree.pdf" /></p>
                        <p class="file-name">Titulo de grado.pdf</p>
                    </div>
                </div>
                <div class="attachment-slot last">
                    <p>Curriculum</p>
                    <div class="file-icon">
                        <p class="file-icon-image"><img src="/Content/Images/filetypes/pdf-128.png" alt="CV.doc" /></p>
                        <p class="file-name">Curriculum Vitae Sujeto de Prueba.doc</p>
                    </div>
                </div>
            </div>
            <div class="attachment-general-slot">
                <p>General</p>
                <div class="file-icon">
                    <p class="file-icon-image"><img src="/Content/Images/filetypes/pdf-128.png" alt="Degree.pdf" /></p>
                    <p class="file-name">Degree.pdf</p>
                </div>
                <div class="file-icon">
                    <p class="file-icon-image"><img src="/Content/Images/filetypes/doc-128.png" alt="DNI.doc" /></p>
                    <p class="file-name">DNI.doc</p>
                </div>
                <div class="file-icon">
                    <p class="file-icon-image"><img src="/Content/Images/filetypes/png-128.png" alt="Foto.png" /></p>
                    <p class="file-name">Foto.png</p>
                </div>
                <div class="file-icon">
                    <p class="file-icon-image"><img src="/Content/Images/filetypes/docx-128.png" alt="Carta de presentacion.docx" /></p>
                    <p class="file-name">Carta de presentacion.docx</p>
                </div>
                <div class="file-icon">
                    <p class="file-icon-image"><img src="/Content/Images/filetypes/xlsx-128.png" alt="Planilla de alta.xlsx" /></p>
                    <p class="file-name">Planilla de alta.xlsx</p>
                </div>
                <div class="file-icon">
                    <p class="file-icon-image"><img src="/Content/Images/filetypes/zip-128.png" alt="Datos.zip" /></p>
                    <p class="file-name">Datos.zip</p>
                </div>
            </div>
        </div>

        <div class="editable-field confidential-info-data" data-bind="AttachmentsBySlot"></div>
        <input type="file" class="quickUploader" />
    </div>
</div>

<div class="bootstrap-scope">
    <div class="modal fade" id="generic-modal">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">×</button>
            <h3 class="person-name"></h3>
            <h6 class="title"></h6>
        </div>
        <div class="modal-body">
            <div class="file-list">
            </div>
            <br />
            <div class="slots"></div>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn close-button" data-dismiss="modal">Cerrar</a>
        </div>
    </div>
</div>


<script type="text/template" id="slot-button-template">
    <input type="button" class="btn btn-primary" value="<%= model.caption %>" /> 
</script>

<script type="text/template" id="available-slots-template">
    <div class="slots">
    <% if (model.singleFile) {%>
        <p>Seleccione el slot al que se subirá el archivo:</p>
        <div class="slots-necessity-2" style="display: none">
            <h5>Slots requeridos</h5>
        </div>
        <div class="slots-necessity-1" style="display: none">
            <h5>Slots deseables</h5>
        </div>
        <div class="slots-necessity-0">
            <h5>Slots opcionales</h5><input type="button" class="btn btn-primary slot-general" value="Otros forms (En notas)" />
        </div>
    <% } else {%>
        <input type="button" class="btn btn-primary slot-general" value="Guardar en notas" />
        <br /><br />
        <p><em>Se está arrastrando más de un archivo. Para seleccionar un slot diferente los archivos deben arrastrarse de manera individual.</em></p>
    <% } %>
        <br />
    </div>
</script>
