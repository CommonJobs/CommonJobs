var AjaxHelper;(function(n){var t=function(){function n(n,t,i,r){this.getData=n,this.process=t,this.calculatePendingCount=i,this.final=r}return n.prototype.getPendingCount=function(){return this.pendingCount},n.prototype.getTaken=function(){return this.taken},n.prototype.getPercentage=function(){return this.getTaken()/(this.getTaken()+this.getPendingCount())},n.prototype.updateState=function(n,t,i){this.taken=t+i,this.pendingCount=this.calculatePendingCount?this.calculatePendingCount(n,t,i):n&&(typeof n.length=="undefined"||n.length)?Infinity:0,this.pendingCount<0&&(this.taken+=this.pendingCount,this.pendingCount=0)},n.prototype.run=function(n,t){var i=this;t=t||0,this.getData(n,t,function(r){i.updateState(r,n,t);var u=i.getPendingCount()>0;u&&i.run(n*2,t+n),i.process&&i.process(r,n,t),u||i.final&&i.final(r,n,t+n)})},n}();n.BunchProcessor=t})(AjaxHelper||(AjaxHelper={}))