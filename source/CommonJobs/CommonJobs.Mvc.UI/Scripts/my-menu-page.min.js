var __extends=this.__extends||function(n,t){function i(){this.constructor=n}i.prototype=t.prototype,n.prototype=new i},MyMenu;(function(n){$(document).ready(function(){var n=new t;n.load()});var t=function(t){function i(){t.call(this,new n.MenuDefinition,null,ViewData.now),this.onAjaxCall=ko.observable(!1),this.LastRequest=ko.observable(),ko.applyBindings(this)}return __extends(i,t),i.prototype.todayToRequest=function(){var n=this.LastRequest(),t=this.now();return n&&Utilities.daysDiff(t,n.Date)===0?null:this.getChoicesByDate(t)},i.prototype.todayRequest=function(){var n=this.LastRequest(),t=this.now();return n&&Utilities.daysDiff(t,n.Date)===0?n:null},i.prototype.previousRequest=function(){var n=this.LastRequest(),t=this.now();return n&&Utilities.daysDiff(t,n.Date)>0?n:null},i.prototype.load=function(){var n=this;this.onAjaxCall(!0);$.ajax(ViewData.menuUrl,{dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){n.menu.reset(t.MenuDefinition),n.reset(t.EmployeeMenu),n.LastRequest(t.LastRequest)},error:function(n){alert("Error getting EmployeeMenu"),$("html").html(n.responseText)},complete:function(){return n.onAjaxCall(!1)}})},i.prototype.save=function(){var n=this,t;this.onAjaxCall(!0);t=this.exportData(),$.ajax(ViewData.menuUrl,{type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),error:function(n){alert("Error saving EmployeeMenu"),$("html").html(n.responseText)},success:function(){return n.isDirty.reset()},complete:function(){return n.onAjaxCall(!1)}})},i}(n.EmployeeMenuDefinition);n.MyMenuPage=t})(MyMenu||(MyMenu={}))